# Foundry

**Foundry は Rust で実装された、非常に高速・移植性に優れた、モジュール式の Ethereum アプリケーション開発ツールキットです。**

Foundry を利用することで、スマートコントラクトのコンパイル、テスト、デプロイ、デバッグなどの作業を効率的に行えます。

## Foundry の構成要素

Foundry は以下のツールから構成されています：

- **Forge**  
  Ethereum スマートコントラクトのコンパイル、テスト、スクリプト実行などを行うフレームワークです。  
  例：Truffle、Hardhat、DappTools と同様の機能を提供し、非常に高速なテスト実行が可能です。

- **Cast**  
  EVM スマートコントラクトとの対話、トランザクションの送信、ブロックチェーンの状態やデータ取得など、日常的な操作を一括して行える多機能ツールです。  
  いわば、EVM に対する「スイス・アーミーナイフ」として利用できます。

- **Anvil**  
  ローカル環境で Ethereum ノードを立ち上げるためのツールです。  
  Ganache や Hardhat Network と同様に、ローカルでテストネットを構築し、開発やデバッグに活用できます。

- **Chisel**  
  Solidity の対話型実行環境（REPL）です。  
  コードをインタラクティブに試すことができ、素早く実験やデバッグが可能です。

## ドキュメント

Foundry の詳細な使い方や仕様については、公式ドキュメントをご参照ください：  
[Foundry Book](https://book.getfoundry.sh/)

## 使い方

以下は、各ツールの基本的な利用方法です。

### 1. ビルド（コンパイル）

スマートコントラクトのソースコードをコンパイルして、バイトコードや ABI を生成します。

```shell
$ forge build
```

### 2. テスト

Forge のテストフレームワークを利用して、スマートコントラクトの動作検証を行います。  
ユニットテストや統合テストを記述し、実行することで、開発中の不具合を早期に発見できます。

```shell
$ forge test
```

### 3. フォーマット

Solidity のコードフォーマッターを実行し、コードスタイルを自動整形します。  
プロジェクト全体で統一感のあるコードスタイルを維持するのに役立ちます。

```shell
$ forge fmt
```

### 4. ガススナップショット

テスト実行時の各関数やトランザクションのガス消費量をスナップショットとして記録します。  
最適化やコストの把握、効率改善に利用できます。

```shell
$ forge snapshot
```

### 5. Anvil の起動

ローカルで Ethereum ノード（テストネット）を起動します。  
デプロイやトランザクションのテスト、デバッグ環境として活用できます。

```shell
$ anvil
```

### 6. デプロイ

作成したスマートコントラクトを、任意の Ethereum ネットワークへデプロイするためのスクリプトを実行します。  
下記の例では、`script/Counter.s.sol` 内の `CounterScript` を指定していますが、プロジェクトに合わせたスクリプトに変更してください。

```shell
$ forge script script/Counter.s.sol:CounterScript --rpc-url <your_rpc_url> --private-key <your_private_key>
```

※ `<your_rpc_url>` および `<your_private_key>` は、ご自身の環境に合わせて設定してください。

### 7. Cast の利用

Cast を使うことで、EVM に関するさまざまなサブコマンドを実行できます。  
たとえば、ブロック情報の取得やトランザクションのシリアライズ、アドレスの生成など、多岐にわたる操作が可能です。

```shell
$ cast <subcommand>
```

### 8. ヘルプ表示

各ツールの使用方法やコマンド一覧を確認する場合は、以下のコマンドでヘルプを表示できます。

```shell
$ forge --help
$ anvil --help
$ cast --help
```

---

## まとめ

Foundry を使用することで、Ethereum スマートコントラクトの開発プロセス全体（コンパイル、テスト、デプロイ、デバッグ）を統一されたツールチェーンで効率的に進めることができます。  
また、各ツールは連携して動作するため、迅速な開発サイクルを実現し、信頼性の高いコード作成や資金調達（STO などのプロジェクトを含む）にも大いに役立ちます。

Foundry を活用し、スマートコントラクト開発の生産性向上と、最先端のブロックチェーンアプリケーションの実現を目指しましょう！
